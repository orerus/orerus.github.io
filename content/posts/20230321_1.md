+++
title = "flutterã§buildã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ã‚‹ã¨ã€ŒFile name too longã€ã¨å‡ºã‚‹å•é¡Œ"
date = "2023-03-21"
author = "orerus"
authorTwitter = "@orerus"
cover = "img/20230321_1/character_program_shock.png"
tags = ["flutter", "ã‚¢ãƒ—ãƒªé–‹ç™º"]
keywords = ["flutter"]
description = "flutterã§buildã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ã‚‹ã¨ã€ŒFile name too longã€ã¨å‡ºã‚‹å•é¡Œã®å¯¾å¿œ"
showFullContent = false
readingTime = false
+++

## flutterã§Androidã‚¢ãƒ—ãƒªã‚’ç¹°ã‚Šè¿”ã—runã—ã¦ã„ã‚‹ã¨çªç„¶ã‚³ã‚±ã‚‹ã“ã¨ãŒã‚ã‚‹

ã“ã‚“ãªæ„Ÿã˜ã§ã€çªå¦‚ `File name too long` ã‚’åãå‡ºã—ã¦ä»¥é™ã‚³ã‚±ç¶šã‘ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

```text
* What went wrong:
Execution failed for task ':app:copyFlutterAssetsLocalDebug'.
> Could not copy file '/hoge/fuga/â€¦/android/app/build/intermediates/flutter/{variant}/flutter_assets/android/app/build/intermediates/merged_assets/{variant}/out/flutter_assets/android/app/build/intermediates/merged_assets/â€¦/piyo' to '/hoge/fuga/â€¦/android/app/build/intermediates/flutter/{variant}/flutter_assets/android/app/build/intermediates/merged_assets/{variant}/out/flutter_assets/android/app/build/intermediates/merged_assets/â€¦/piyo'.
   > /hoge/fuga/â€¦/android/app/build/intermediates/flutter/{variant}/flutter_assets/android/app/build/intermediates/merged_assets/{variant}/out/flutter_assets/android/app/build/intermediates/merged_assets/â€¦/piyo (File name too long)

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.

* Get more help at https://help.gradle.org

BUILD FAILED in 1m 48s
Exception: Gradle task assembleLocalDebug failed with exit code 1
```

æ‰‹å…ƒã®ç’°å¢ƒã§ã¯ [gradle ã® copyFlutterAssetsTask](https://chromium.googlesource.com/external/github.com/flutter/flutter/+/refs/tags/v1.12.10/packages/flutter_tools/gradle/flutter.gradle#652) ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã‚³ã‚±ã¦ã„ã¾ã—ãŸã€‚

## åŸå› 

ã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“ğŸ™  
ãŸã ã€ä¸‹è¨˜ãƒ„ã‚¤ãƒ¼ãƒˆã«ã‚ã‚‹ã‚ˆã†ã«buildå›æ•°ã‚’é‡ã­ã‚‹äº‹ã«buildãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒæ·±ããªã£ã¦ã„ã£ã¦ã„ã‚‹ã®ã§ã€buildã®éƒ½åº¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒæ˜ã‚‰ã‚Œã‚‹ -> file name too long ã®æµã‚Œã£ã½ã„ã“ã¨ã¯ç¢ºã‹ã ã¨æ€ã‚ã‚Œã¾ã™ã€‚

{{<tweet 1637115808890621952>}}

## ã¨ã‚Šã‚ãˆãšã®å¯¾å¿œç­–

æ ¹æœ¬åŸå› ã¯åˆ†ã‹ã‚‰ãªã„ã®ã§å ´å½“ãŸã‚Šçš„ãªæ–¹æ³•ã«ãªã‚Šã¾ã™ãŒã€æ‰‹ã£å–ã‚Šæ—©ãã‚„ã‚‹ãªã‚‰ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã§buildãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤ã—ã¦å†åº¦runã™ã‚Œã°OKã€‚

```bash
rm -rf android/app/build
```

è‡ªåˆ†ã¯éƒ½åº¦ã‚³ãƒãƒ³ãƒ‰ã‚’å©ãã®ãŒé¢å€’ã ã£ãŸç‚ºã€AndroidStudioã®æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ä»¥ä¸‹ã®ã‚ˆã†ãªã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’buildã®å‰ã«å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ã¦å‡Œã„ã§ã„ã¾ã™ã€‚  

```bash
#!/bin/bash

DIR="android/app/build/intermediates/flutter/{variant}/flutter_assets/android"

if [ -d "$DIR" ]; then
  rm -rf "$DIR"
fi

DIR="android/app/build/intermediates/merged_assets/{variant}/out/flutter_assets/android"

if [ -d "$DIR" ]; then
  rm -rf "$DIR"
fi
```

â€»{variant}ã®éƒ¨åˆ†ã¯å„è‡ªã®ç’°å¢ƒã«èª­ã¿æ›¿ãˆã¦ãã ã•ã„  
â€»ã¨ã‚Šã‚ãˆãšä¸Šã®ï¼’ã¤ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ¶ˆã—ã¦ãŠã‘ã°å¤§ä¸ˆå¤«ãã†ã§ã—ãŸ  

ä¸€å¿œAndroidStudioã®è¨­å®šæ‰‹é †ã‚‚

<table>
<tr>
<td>{{< image src="/img/20230321_1/remove_build_1.png" alt="step1" position="center" style="border-radius: 8px;" >}}</td>
</tr>
<tr>
<td>{{< image src="/img/20230321_1/remove_build_2.png" alt="step2" position="center" style="border-radius: 8px;" >}}</td>
</tr>
<tr>
<td>{{< image src="/img/20230321_1/remove_build_3.png" alt="step3" position="center" style="border-radius: 8px;" >}}</td>
</tr>
</table>

## ã•ã„ã”ã«

ã‚‚ã—æ ¹æœ¬åŸå› ï¼†è§£æ±ºç­–ãŒãŠåˆ†ã‹ã‚Šã®æ–¹ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã—ãŸã‚‰æ˜¯é[Twitter](https://twitter.com/orerus/status/1637114770691346434?s=20)ã®æ–¹ã«DMã‹ãƒªãƒ—ãã ã•ã„ğŸ™‡â€â™‚â€